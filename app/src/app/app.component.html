<div class="container">
  <h1>Energy Optimizer</h1>
  <form (ngSubmit)="onSubmit()">
    <label>
      Peak price (USD/kWh):
      <input type="number" step="0.01" [(ngModel)]="peakPrice" name="peak_price" />
    </label>
    <label>
      Off-peak price (USD/kWh):
      <input type="number" step="0.01" [(ngModel)]="offPeakPrice" name="off_peak_price" />
    </label>
    <label>
      Battery cost per kW (USD/kWh):
      <input type="number" step="0.01" [(ngModel)]="batteryCostPerKw" name="battery_cost_per_kw" />
    </label>
    <label>
      Peak consumption (kWh):
      <input type="number" step="1" [(ngModel)]="peakConsumption" name="peak_consumption" />
    </label>
    <label>
      Off-peak consumption (kWh):
      <input type="number" step="1" [(ngModel)]="offPeakConsumption" name="off_peak_consumption" />
    </label>

    <label>Solar sizes (JSON map size->cost):</label>
    <textarea [(ngModel)]="solarInstallationSizes" name="solar_installation_sizes"></textarea>

    <button type="submit" [disabled]="isRunning">{{ isRunning ? 'Running...' : 'Run optimization' }}</button>
  </form>

  <h2>Results</h2>
  <div *ngIf="result" class="results-grid">
    <div class="result-card">
      <div class="result-label">Solar Capacity</div>
      <div class="result-value">{{ result.solar_capacity.toFixed(2) }} kW</div>
    </div>
    <div class="result-card">
      <div class="result-label">Battery Capacity</div>
      <div class="result-value">{{ result.battery_capacity.toFixed(2) }} kWh</div>
    </div>
    <div class="result-card">
      <div class="result-label">Off-peak Grid Usage</div>
      <div class="result-value">{{ result.off_peak_grid_usage.toFixed(2) }} kWh</div>
    </div>
    <div class="result-card">
      <div class="result-label">Peak Grid Consumption</div>
      <div class="result-value">{{ result.peak_grid_consumption.toFixed(2) }} kWh</div>
    </div>
  </div>
  <div *ngIf="resultError" class="error-message">
    {{ resultError }}
  </div>
  <div *ngIf="!result && !resultError" class="no-results">
    No results yet. Run the optimization to see results.
  </div>
</div>

